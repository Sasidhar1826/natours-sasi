var t,e,r,n,o,a,i,u,c,s,l,p,f=require("axios"),d=globalThis;function v(t){return t&&t.__esModule?t.default:t}var y={},m={},g=function(t){return t&&t.Math===Math&&t};m=g("object"==typeof globalThis&&globalThis)||g("object"==typeof window&&window)||g("object"==typeof self&&self)||g("object"==typeof d&&d)||g("object"==typeof m&&m)||function(){return this}()||Function("return this")();var b={},h={};b=!(h=function(t){try{return!!t()}catch(t){return!0}})(function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]});var w={},S={};S=!h(function(){var t=(function(){}).bind();return"function"!=typeof t||t.hasOwnProperty("prototype")});var E=Function.prototype.call;w=S?E.bind(E):function(){return E.apply(E,arguments)};var O={}.propertyIsEnumerable,j=Object.getOwnPropertyDescriptor;r=j&&!O.call({1:2},1)?function(t){var e=j(this,t);return!!e&&e.enumerable}:O;var P={};P=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}};var I={},M={},T={},B=Function.prototype,k=B.call,C=S&&B.bind.bind(k,k),F={},q=(T=S?C:function(t){return function(){return k.apply(t,arguments)}})({}.toString),D=T("".slice);F=function(t){return D(q(t),8,-1)};var _=Object,x=T("".split);M=h(function(){return!_("z").propertyIsEnumerable(0)})?function(t){return"String"===F(t)?x(t,""):_(t)}:_;var z={},A={};A=function(t){return null==t};var $=TypeError;z=function(t){if(A(t))throw new $("Can't call method on "+t);return t},I=function(t){return M(z(t))};var N={},R={},U={},W={},H="object"==typeof document&&document.all;W=void 0===H&&void 0!==H?function(t){return"function"==typeof t||t===H}:function(t){return"function"==typeof t},U=function(t){return"object"==typeof t?null!==t:W(t)};var K={},V={};V=function(t,e){var r;return arguments.length<2?(r=m[t],W(r)?r:void 0):m[t]&&m[t][e]};var Y={};Y=T({}.isPrototypeOf);var G={},J={},Q={},Z={};Z="undefined"!=typeof navigator&&String(navigator.userAgent)||"";var X=m.process,tt=m.Deno,te=X&&X.versions||tt&&tt.version,tr=te&&te.v8;tr&&(o=(n=tr.split("."))[0]>0&&n[0]<4?1:+(n[0]+n[1])),!o&&Z&&(!(n=Z.match(/Edge\/(\d+)/))||n[1]>=74)&&(n=Z.match(/Chrome\/(\d+)/))&&(o=+n[1]),Q=o;var tn=m.String;G=(J=!!Object.getOwnPropertySymbols&&!h(function(){var t=Symbol("symbol detection");return!tn(t)||!(Object(t) instanceof Symbol)||!Symbol.sham&&Q&&Q<41}))&&!Symbol.sham&&"symbol"==typeof Symbol.iterator;var to=Object;K=G?function(t){return"symbol"==typeof t}:function(t){var e=V("Symbol");return W(e)&&Y(e.prototype,to(t))};var ta={},ti={},tu={},tc=String;tu=function(t){try{return tc(t)}catch(t){return"Object"}};var ts=TypeError;ti=function(t){if(W(t))return t;throw new ts(tu(t)+" is not a function")},ta=function(t,e){var r=t[e];return A(r)?void 0:ti(r)};var tl={},tp=TypeError;tl=function(t,e){var r,n;if("string"===e&&W(r=t.toString)&&!U(n=w(r,t))||W(r=t.valueOf)&&!U(n=w(r,t))||"string"!==e&&W(r=t.toString)&&!U(n=w(r,t)))return n;throw new tp("Can't convert object to primitive value")};var tf={},td={},tv={};tv=!1;var ty={},tm=Object.defineProperty;ty=function(t,e){try{tm(m,t,{value:e,configurable:!0,writable:!0})}catch(r){m[t]=e}return e};var tg="__core-js_shared__",tb=td=m[tg]||ty(tg,{});(tb.versions||(tb.versions=[])).push({version:"3.37.0",mode:tv?"pure":"global",copyright:"Â© 2014-2024 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.37.0/LICENSE",source:"https://github.com/zloirock/core-js"}),tf=function(t,e){return td[t]||(td[t]=e||{})};var th={},tw={},tS=Object;tw=function(t){return tS(z(t))};var tE=T({}.hasOwnProperty);th=Object.hasOwn||function(t,e){return tE(tw(t),e)};var tO={},tj=0,tP=Math.random(),tI=T(1..toString);tO=function(t){return"Symbol("+(void 0===t?"":t)+")_"+tI(++tj+tP,36)};var tL=m.Symbol,tM=tf("wks"),tT=G?tL.for||tL:tL&&tL.withoutSetter||tO,tB=TypeError,tk=(th(tM,t="toPrimitive")||(tM[t]=J&&th(tL,t)?tL[t]:tT("Symbol."+t)),tM[t]);R=function(t,e){if(!U(t)||K(t))return t;var r,n=ta(t,tk);if(n){if(void 0===e&&(e="default"),r=w(n,t,e),!U(r)||K(r))return r;throw new tB("Can't convert object to primitive value")}return void 0===e&&(e="number"),tl(t,e)},N=function(t){var e=R(t,"string");return K(e)?e:e+""};var tC={},tF={},tq=m.document,tD=U(tq)&&U(tq.createElement);tF=function(t){return tD?tq.createElement(t):{}},tC=!b&&!h(function(){return 7!==Object.defineProperty(tF("div"),"a",{get:function(){return 7}}).a});var t_=Object.getOwnPropertyDescriptor;e=b?t_:function(t,e){if(t=I(t),e=N(e),tC)try{return t_(t,e)}catch(t){}if(th(t,e))return P(!w(r,t,e),t[e])};var tx={},tz={};tz=b&&h(function(){return 42!==Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype});var tA={},t$=String,tN=TypeError;tA=function(t){if(U(t))return t;throw new tN(t$(t)+" is not an object")};var tR=TypeError,tU=Object.defineProperty,tW=Object.getOwnPropertyDescriptor,tH="enumerable",tK="configurable",tV="writable";a=b?tz?function(t,e,r){if(tA(t),e=N(e),tA(r),"function"==typeof t&&"prototype"===e&&"value"in r&&tV in r&&!r[tV]){var n=tW(t,e);n&&n[tV]&&(t[e]=r.value,r={configurable:tK in r?r[tK]:n[tK],enumerable:tH in r?r[tH]:n[tH],writable:!1})}return tU(t,e,r)}:tU:function(t,e,r){if(tA(t),e=N(e),tA(r),tC)try{return tU(t,e,r)}catch(t){}if("get"in r||"set"in r)throw new tR("Accessors not supported");return"value"in r&&(t[e]=r.value),t},tx=b?function(t,e,r){return a(t,e,P(1,r))}:function(t,e,r){return t[e]=r,t};var tY={},tG={},tJ=Function.prototype,tQ=b&&Object.getOwnPropertyDescriptor,tZ=th(tJ,"name")&&(!b||b&&tQ(tJ,"name").configurable),tX={},t0=T(Function.toString);W(td.inspectSource)||(td.inspectSource=function(t){return t0(t)}),tX=td.inspectSource;var t1={},t4={},t2=m.WeakMap;t4=W(t2)&&/native code/.test(String(t2));var t3={},t7=tf("keys");t3=function(t){return t7[t]||(t7[t]=tO(t))};var t5={};t5={};var t8="Object already initialized",t9=m.TypeError,t6=m.WeakMap;if(t4||td.state){var et=td.state||(td.state=new t6);et.get=et.get,et.has=et.has,et.set=et.set,i=function(t,e){if(et.has(t))throw new t9(t8);return e.facade=t,et.set(t,e),e},u=function(t){return et.get(t)||{}},c=function(t){return et.has(t)}}else{var ee=t3("state");t5[ee]=!0,i=function(t,e){if(th(t,ee))throw new t9(t8);return e.facade=t,tx(t,ee,e),e},u=function(t){return th(t,ee)?t[ee]:{}},c=function(t){return th(t,ee)}}var er=(t1={set:i,get:u,has:c,enforce:function(t){return c(t)?u(t):i(t,{})},getterFor:function(t){return function(e){var r;if(!U(e)||(r=u(e)).type!==t)throw new t9("Incompatible receiver, "+t+" required");return r}}}).enforce,en=t1.get,eo=String,ea=Object.defineProperty,ei=T("".slice),eu=T("".replace),ec=T([].join),es=b&&!h(function(){return 8!==ea(function(){},"length",{value:8}).length}),el=String(String).split("String"),ep=tG=function(t,e,r){"Symbol("===ei(eo(e),0,7)&&(e="["+eu(eo(e),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),r&&r.getter&&(e="get "+e),r&&r.setter&&(e="set "+e),(!th(t,"name")||tZ&&t.name!==e)&&(b?ea(t,"name",{value:e,configurable:!0}):t.name=e),es&&r&&th(r,"arity")&&t.length!==r.arity&&ea(t,"length",{value:r.arity});try{r&&th(r,"constructor")&&r.constructor?b&&ea(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(t){}var n=er(t);return th(n,"source")||(n.source=ec(el,"string"==typeof e?e:"")),t};Function.prototype.toString=ep(function(){return W(this)&&en(this).source||tX(this)},"toString"),tY=function(t,e,r,n){n||(n={});var o=n.enumerable,i=void 0!==n.name?n.name:e;if(W(r)&&tG(r,i,n),n.global)o?t[e]=r:ty(e,r);else{try{n.unsafe?t[e]&&(o=!0):delete t[e]}catch(t){}o?t[e]=r:a(t,e,{value:r,enumerable:!1,configurable:!n.nonConfigurable,writable:!n.nonWritable})}return t};var ef={},ed={},ev={},ey={},em={},eg={},eb=Math.ceil,eh=Math.floor;eg=Math.trunc||function(t){var e=+t;return(e>0?eh:eb)(e)},em=function(t){var e=+t;return e!=e||0===e?0:eg(e)};var ew=Math.max,eS=Math.min;ey=function(t,e){var r=em(t);return r<0?ew(r+e,0):eS(r,e)};var eE={},eO={},ej=Math.min;eO=function(t){var e=em(t);return e>0?ej(e,9007199254740991):0},eE=function(t){return eO(t.length)};var eP=function(t){return function(e,r,n){var o,a=I(e),i=eE(a);if(0===i)return!t&&-1;var u=ey(n,i);if(t&&r!=r){for(;i>u;)if((o=a[u++])!=o)return!0}else for(;i>u;u++)if((t||u in a)&&a[u]===r)return t||u||0;return!t&&-1}},eI={includes:eP(!0),indexOf:eP(!1)}.indexOf,eL=T([].push);ev=function(t,e){var r,n=I(t),o=0,a=[];for(r in n)!th(t5,r)&&th(n,r)&&eL(a,r);for(;e.length>o;)th(n,r=e[o++])&&(~eI(a,r)||eL(a,r));return a};var eM=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"].concat("length","prototype");s=Object.getOwnPropertyNames||function(t){return ev(t,eM)},l=Object.getOwnPropertySymbols;var eT=T([].concat);ed=V("Reflect","ownKeys")||function(t){var e=s(tA(t));return l?eT(e,l(t)):e},ef=function(t,r,n){for(var o=ed(r),i=0;i<o.length;i++){var u=o[i];th(t,u)||n&&th(n,u)||a(t,u,e(r,u))}};var eB={},ek=/#|\.prototype\./,eC=function(t,e){var r=eq[eF(t)];return r===e_||r!==eD&&(W(e)?h(e):!!e)},eF=eC.normalize=function(t){return String(t).replace(ek,".").toLowerCase()},eq=eC.data={},eD=eC.NATIVE="N",e_=eC.POLYFILL="P";eB=eC,y=function(t,r){var n,o,a,i,u,c=t.target,s=t.global,l=t.stat;if(n=s?m:l?m[c]||ty(c,{}):m[c]&&m[c].prototype)for(o in r){if(i=r[o],a=t.dontCallGetSet?(u=e(n,o))&&u.value:n[o],!eB(s?o:c+(l?".":"#")+o,t.forced)&&void 0!==a){if(typeof i==typeof a)continue;ef(i,a)}(t.sham||a&&a.sham)&&tx(i,"sham",!0),tY(n,o,i,t)}};var ex={},ez=Function.prototype,eA=ez.apply,e$=ez.call;ex="object"==typeof Reflect&&Reflect.apply||(S?e$.bind(eA):function(){return e$.apply(eA,arguments)});var eN={};eN=T([].slice);var eR=TypeError,eU=function(t){var e,r;this.promise=new t(function(t,n){if(void 0!==e||void 0!==r)throw new eR("Bad Promise constructor");e=t,r=n}),this.resolve=ti(e),this.reject=ti(r)};p=function(t){return new eU(t)};var eW={};eW=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}},y({target:"Promise",stat:!0,forced:!0},{try:function(t){var e=eN(arguments,1),r=p(this),n=eW(function(){return ex(ti(t),void 0,e)});return(n.error?r.reject:r.resolve)(n.value),r.promise}});const eH=()=>{let t=document.querySelector(".alert");t&&t.parentElement.removeChild(t)},eK=(t,e,r=7)=>{eH();let n=`<div class="alert alert--${t}">${e}</div>`;document.querySelector("body").insertAdjacentHTML("afterbegin",n),window.setTimeout(eH,1e3*r)},eV=async(t,e)=>{try{let r=await v(f).post("/api/v1/users/login",{email:t,password:e});"success"===r.data.status&&(eK("success","Logged in successfully!"),window.setTimeout(()=>{location.assign("/")},1500))}catch(t){eK("error",t.response.data.message)}},eY=async()=>{try{let t=await v(f).get("/api/v1/users/logout");"success"===t.data.status&&location.reload(!0)}catch{eK("error","Error loggin out!")}},eG=async(t,e)=>{try{let r=await v(f).patch("password"===e?"/api/v1/users/updateMyPassword":"/api/v1/users/updateMe",t);"success"===r.data.status&&eK("success",`${e.toUpperCase()} updated successfully!`)}catch(t){eK("error",t.response.data.message)}},eJ=Stripe("pk_test_51Ow8asSEq49Iv6nu2HnctlSPSdUAt58Lq3xF4lPFhQRDK8MzcFMEtYlS0sii8sVeFtwdle36moAENUBD0R4n54Ey00lr3wcwjh"),eQ=async t=>{try{let e=await v(f).get(`/api/v1/bookings/checkout-session/${t}`);await eJ.redirectToCheckout({sessionId:e.data.session.id})}catch(t){console.log(t),eK("error",t)}},eZ=document.getElementById("map"),eX=document.querySelector(".form--login"),e0=document.querySelector(".nav__el--logout"),e1=document.querySelector(".form-user-data"),e4=document.querySelector(".form-user-password"),e2=document.getElementById("book-tour");eZ&&(t=>{var e=L.map("map",{scrollWheelZoom:!1});L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(e);let r=[];t.forEach(t=>{r.push(t.coordinates.reverse());var n=L.icon({iconUrl:"../img/pin.png",iconSize:[47,55],iconAnchor:[31,55],popupAnchor:[-3,-32]}),o=L.marker(t.coordinates,{icon:n}).addTo(e);o.bindPopup(`<b>Day ${t.day}:</b><br>${t.description}`),o.openPopup()}),e.fitBounds(r)})(JSON.parse(document.getElementById("map").dataset.locations)),eX&&eX.addEventListener("submit",t=>{t.preventDefault(),eV(document.getElementById("email").value,document.getElementById("password").value)}),e0&&e0.addEventListener("click",eY),e1&&e1.addEventListener("submit",t=>{t.preventDefault();let e=new FormData;e.append("name",document.getElementById("name").value),e.append("email",document.getElementById("email").value),e.append("photo",document.getElementById("photo").files[0]),eG(e,"data")}),e4&&e4.addEventListener("submit",async t=>{t.preventDefault(),document.querySelector(".btn--save-password").textContent="Updating...";let e=document.getElementById("password-current").value,r=document.getElementById("password").value,n=document.getElementById("password-confirm").value;await eG({passwordCurrent:e,password:r,passwordConfirm:n},"password"),document.querySelector(".btn--save-password").textContent="Save password",document.getElementById("password-current").value="",document.getElementById("password").value="",document.getElementById("password-confirm").value=""}),e2&&e2.addEventListener("click",t=>{t.target.textContent="Processing...";let{tourId:e}=t.target.dataset;eQ(e)});const e3=document.querySelector("body").dataset.alert;e3&&eK("success",e3,20);
//# sourceMappingURL=index.js.map
