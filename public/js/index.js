var t,e,r,n,o,a,i,u,c,s,l,p,f=globalThis,d={},v={},y=function(t){return t&&t.Math===Math&&t};v=y("object"==typeof globalThis&&globalThis)||y("object"==typeof window&&window)||y("object"==typeof self&&self)||y("object"==typeof f&&f)||y("object"==typeof v&&v)||function(){return this}()||Function("return this")();var m={},g={};m=!(g=function(t){try{return!!t()}catch(t){return!0}})(function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]});var b={},h={};h=!g(function(){var t=(function(){}).bind();return"function"!=typeof t||t.hasOwnProperty("prototype")});var w=Function.prototype.call;b=h?w.bind(w):function(){return w.apply(w,arguments)};var S={}.propertyIsEnumerable,E=Object.getOwnPropertyDescriptor;r=E&&!S.call({1:2},1)?function(t){var e=E(this,t);return!!e&&e.enumerable}:S;var O={};O=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}};var j={},P={},I={},T=Function.prototype,B=T.call,M=h&&T.bind.bind(B,B),k={},C=(I=h?M:function(t){return function(){return B.apply(t,arguments)}})({}.toString),F=I("".slice);k=function(t){return F(C(t),8,-1)};var D=Object,q=I("".split);P=g(function(){return!D("z").propertyIsEnumerable(0)})?function(t){return"String"===k(t)?q(t,""):D(t)}:D;var x={},_={};_=function(t){return null==t};var z=TypeError;x=function(t){if(_(t))throw new z("Can't call method on "+t);return t},j=function(t){return P(x(t))};var A={},$={},N={},R={},U="object"==typeof document&&document.all;R=void 0===U&&void 0!==U?function(t){return"function"==typeof t||t===U}:function(t){return"function"==typeof t},N=function(t){return"object"==typeof t?null!==t:R(t)};var W={},H={};H=function(t,e){var r;return arguments.length<2?(r=v[t],R(r)?r:void 0):v[t]&&v[t][e]};var K={};K=I({}.isPrototypeOf);var V={},Y={},G={},J={};J="undefined"!=typeof navigator&&String(navigator.userAgent)||"";var Q=v.process,Z=v.Deno,X=Q&&Q.versions||Z&&Z.version,tt=X&&X.v8;tt&&(o=(n=tt.split("."))[0]>0&&n[0]<4?1:+(n[0]+n[1])),!o&&J&&(!(n=J.match(/Edge\/(\d+)/))||n[1]>=74)&&(n=J.match(/Chrome\/(\d+)/))&&(o=+n[1]),G=o;var te=v.String;V=(Y=!!Object.getOwnPropertySymbols&&!g(function(){var t=Symbol("symbol detection");return!te(t)||!(Object(t) instanceof Symbol)||!Symbol.sham&&G&&G<41}))&&!Symbol.sham&&"symbol"==typeof Symbol.iterator;var tr=Object;W=V?function(t){return"symbol"==typeof t}:function(t){var e=H("Symbol");return R(e)&&K(e.prototype,tr(t))};var tn={},to={},ta={},ti=String;ta=function(t){try{return ti(t)}catch(t){return"Object"}};var tu=TypeError;to=function(t){if(R(t))return t;throw new tu(ta(t)+" is not a function")},tn=function(t,e){var r=t[e];return _(r)?void 0:to(r)};var tc={},ts=TypeError;tc=function(t,e){var r,n;if("string"===e&&R(r=t.toString)&&!N(n=b(r,t))||R(r=t.valueOf)&&!N(n=b(r,t))||"string"!==e&&R(r=t.toString)&&!N(n=b(r,t)))return n;throw new ts("Can't convert object to primitive value")};var tl={},tp={},tf={};tf=!1;var td={},tv=Object.defineProperty;td=function(t,e){try{tv(v,t,{value:e,configurable:!0,writable:!0})}catch(r){v[t]=e}return e};var ty="__core-js_shared__",tm=tp=v[ty]||td(ty,{});(tm.versions||(tm.versions=[])).push({version:"3.37.0",mode:tf?"pure":"global",copyright:"Â© 2014-2024 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.37.0/LICENSE",source:"https://github.com/zloirock/core-js"}),tl=function(t,e){return tp[t]||(tp[t]=e||{})};var tg={},tb={},th=Object;tb=function(t){return th(x(t))};var tw=I({}.hasOwnProperty);tg=Object.hasOwn||function(t,e){return tw(tb(t),e)};var tS={},tE=0,tO=Math.random(),tj=I(1..toString);tS=function(t){return"Symbol("+(void 0===t?"":t)+")_"+tj(++tE+tO,36)};var tP=v.Symbol,tI=tl("wks"),tL=V?tP.for||tP:tP&&tP.withoutSetter||tS,tT=TypeError,tB=(tg(tI,t="toPrimitive")||(tI[t]=Y&&tg(tP,t)?tP[t]:tL("Symbol."+t)),tI[t]);$=function(t,e){if(!N(t)||W(t))return t;var r,n=tn(t,tB);if(n){if(void 0===e&&(e="default"),r=b(n,t,e),!N(r)||W(r))return r;throw new tT("Can't convert object to primitive value")}return void 0===e&&(e="number"),tc(t,e)},A=function(t){var e=$(t,"string");return W(e)?e:e+""};var tM={},tk={},tC=v.document,tF=N(tC)&&N(tC.createElement);tk=function(t){return tF?tC.createElement(t):{}},tM=!m&&!g(function(){return 7!==Object.defineProperty(tk("div"),"a",{get:function(){return 7}}).a});var tD=Object.getOwnPropertyDescriptor;e=m?tD:function(t,e){if(t=j(t),e=A(e),tM)try{return tD(t,e)}catch(t){}if(tg(t,e))return O(!b(r,t,e),t[e])};var tq={},tx={};tx=m&&g(function(){return 42!==Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype});var t_={},tz=String,tA=TypeError;t_=function(t){if(N(t))return t;throw new tA(tz(t)+" is not an object")};var t$=TypeError,tN=Object.defineProperty,tR=Object.getOwnPropertyDescriptor,tU="enumerable",tW="configurable",tH="writable";a=m?tx?function(t,e,r){if(t_(t),e=A(e),t_(r),"function"==typeof t&&"prototype"===e&&"value"in r&&tH in r&&!r[tH]){var n=tR(t,e);n&&n[tH]&&(t[e]=r.value,r={configurable:tW in r?r[tW]:n[tW],enumerable:tU in r?r[tU]:n[tU],writable:!1})}return tN(t,e,r)}:tN:function(t,e,r){if(t_(t),e=A(e),t_(r),tM)try{return tN(t,e,r)}catch(t){}if("get"in r||"set"in r)throw new t$("Accessors not supported");return"value"in r&&(t[e]=r.value),t},tq=m?function(t,e,r){return a(t,e,O(1,r))}:function(t,e,r){return t[e]=r,t};var tK={},tV={},tY=Function.prototype,tG=m&&Object.getOwnPropertyDescriptor,tJ=tg(tY,"name")&&(!m||m&&tG(tY,"name").configurable),tQ={},tZ=I(Function.toString);R(tp.inspectSource)||(tp.inspectSource=function(t){return tZ(t)}),tQ=tp.inspectSource;var tX={},t0={},t1=v.WeakMap;t0=R(t1)&&/native code/.test(String(t1));var t4={},t2=tl("keys");t4=function(t){return t2[t]||(t2[t]=tS(t))};var t3={};t3={};var t7="Object already initialized",t5=v.TypeError,t8=v.WeakMap;if(t0||tp.state){var t9=tp.state||(tp.state=new t8);t9.get=t9.get,t9.has=t9.has,t9.set=t9.set,i=function(t,e){if(t9.has(t))throw new t5(t7);return e.facade=t,t9.set(t,e),e},u=function(t){return t9.get(t)||{}},c=function(t){return t9.has(t)}}else{var t6=t4("state");t3[t6]=!0,i=function(t,e){if(tg(t,t6))throw new t5(t7);return e.facade=t,tq(t,t6,e),e},u=function(t){return tg(t,t6)?t[t6]:{}},c=function(t){return tg(t,t6)}}var et=(tX={set:i,get:u,has:c,enforce:function(t){return c(t)?u(t):i(t,{})},getterFor:function(t){return function(e){var r;if(!N(e)||(r=u(e)).type!==t)throw new t5("Incompatible receiver, "+t+" required");return r}}}).enforce,ee=tX.get,er=String,en=Object.defineProperty,eo=I("".slice),ea=I("".replace),ei=I([].join),eu=m&&!g(function(){return 8!==en(function(){},"length",{value:8}).length}),ec=String(String).split("String"),es=tV=function(t,e,r){"Symbol("===eo(er(e),0,7)&&(e="["+ea(er(e),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),r&&r.getter&&(e="get "+e),r&&r.setter&&(e="set "+e),(!tg(t,"name")||tJ&&t.name!==e)&&(m?en(t,"name",{value:e,configurable:!0}):t.name=e),eu&&r&&tg(r,"arity")&&t.length!==r.arity&&en(t,"length",{value:r.arity});try{r&&tg(r,"constructor")&&r.constructor?m&&en(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(t){}var n=et(t);return tg(n,"source")||(n.source=ei(ec,"string"==typeof e?e:"")),t};Function.prototype.toString=es(function(){return R(this)&&ee(this).source||tQ(this)},"toString"),tK=function(t,e,r,n){n||(n={});var o=n.enumerable,i=void 0!==n.name?n.name:e;if(R(r)&&tV(r,i,n),n.global)o?t[e]=r:td(e,r);else{try{n.unsafe?t[e]&&(o=!0):delete t[e]}catch(t){}o?t[e]=r:a(t,e,{value:r,enumerable:!1,configurable:!n.nonConfigurable,writable:!n.nonWritable})}return t};var el={},ep={},ef={},ed={},ev={},ey={},em=Math.ceil,eg=Math.floor;ey=Math.trunc||function(t){var e=+t;return(e>0?eg:em)(e)},ev=function(t){var e=+t;return e!=e||0===e?0:ey(e)};var eb=Math.max,eh=Math.min;ed=function(t,e){var r=ev(t);return r<0?eb(r+e,0):eh(r,e)};var ew={},eS={},eE=Math.min;eS=function(t){var e=ev(t);return e>0?eE(e,9007199254740991):0},ew=function(t){return eS(t.length)};var eO=function(t){return function(e,r,n){var o,a=j(e),i=ew(a);if(0===i)return!t&&-1;var u=ed(n,i);if(t&&r!=r){for(;i>u;)if((o=a[u++])!=o)return!0}else for(;i>u;u++)if((t||u in a)&&a[u]===r)return t||u||0;return!t&&-1}},ej={includes:eO(!0),indexOf:eO(!1)}.indexOf,eP=I([].push);ef=function(t,e){var r,n=j(t),o=0,a=[];for(r in n)!tg(t3,r)&&tg(n,r)&&eP(a,r);for(;e.length>o;)tg(n,r=e[o++])&&(~ej(a,r)||eP(a,r));return a};var eI=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"].concat("length","prototype");s=Object.getOwnPropertyNames||function(t){return ef(t,eI)},l=Object.getOwnPropertySymbols;var eL=I([].concat);ep=H("Reflect","ownKeys")||function(t){var e=s(t_(t));return l?eL(e,l(t)):e},el=function(t,r,n){for(var o=ep(r),i=0;i<o.length;i++){var u=o[i];tg(t,u)||n&&tg(n,u)||a(t,u,e(r,u))}};var eT={},eB=/#|\.prototype\./,eM=function(t,e){var r=eC[ek(t)];return r===eD||r!==eF&&(R(e)?g(e):!!e)},ek=eM.normalize=function(t){return String(t).replace(eB,".").toLowerCase()},eC=eM.data={},eF=eM.NATIVE="N",eD=eM.POLYFILL="P";eT=eM,d=function(t,r){var n,o,a,i,u,c=t.target,s=t.global,l=t.stat;if(n=s?v:l?v[c]||td(c,{}):v[c]&&v[c].prototype)for(o in r){if(i=r[o],a=t.dontCallGetSet?(u=e(n,o))&&u.value:n[o],!eT(s?o:c+(l?".":"#")+o,t.forced)&&void 0!==a){if(typeof i==typeof a)continue;el(i,a)}(t.sham||a&&a.sham)&&tq(i,"sham",!0),tK(n,o,i,t)}};var eq={},ex=Function.prototype,e_=ex.apply,ez=ex.call;eq="object"==typeof Reflect&&Reflect.apply||(h?ez.bind(e_):function(){return ez.apply(e_,arguments)});var eA={};eA=I([].slice);var e$=TypeError,eN=function(t){var e,r;this.promise=new t(function(t,n){if(void 0!==e||void 0!==r)throw new e$("Bad Promise constructor");e=t,r=n}),this.resolve=to(e),this.reject=to(r)};p=function(t){return new eN(t)};var eR={};eR=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}},d({target:"Promise",stat:!0,forced:!0},{try:function(t){var e=eA(arguments,1),r=p(this),n=eR(function(){return eq(to(t),void 0,e)});return(n.error?r.reject:r.resolve)(n.value),r.promise}});const eU=()=>{let t=document.querySelector(".alert");t&&t.parentElement.removeChild(t)},eW=(t,e,r=7)=>{eU();let n=`<div class="alert alert--${t}">${e}</div>`;document.querySelector("body").insertAdjacentHTML("afterbegin",n),window.setTimeout(eU,1e3*r)},eH=async(t,e)=>{try{let r=await axios.post("/api/v1/users/login",{email:t,password:e});"success"===r.data.status&&(eW("success","Logged in successfully!"),window.setTimeout(()=>{location.assign("/")},1500))}catch(t){eW("error",t.response.data.message)}},eK=async()=>{try{let t=await axios.get("/api/v1/users/logout");"success"===t.data.status&&location.reload(!0)}catch{eW("error","Error loggin out!")}},eV=async(t,e)=>{try{let r=await axios.patch("password"===e?"/api/v1/users/updateMyPassword":"/api/v1/users/updateMe",t);"success"===r.data.status&&eW("success",`${e.toUpperCase()} updated successfully!`)}catch(t){eW("error",t.response.data.message)}},eY=Stripe("pk_test_51Ow8asSEq49Iv6nu2HnctlSPSdUAt58Lq3xF4lPFhQRDK8MzcFMEtYlS0sii8sVeFtwdle36moAENUBD0R4n54Ey00lr3wcwjh"),eG=async t=>{try{let e=await axios.get(`/api/v1/bookings/checkout-session/${t}`);await eY.redirectToCheckout({sessionId:e.data.session.id})}catch(t){console.log(t),eW("error",t)}},eJ=document.getElementById("map"),eQ=document.querySelector(".form--login"),eZ=document.querySelector(".nav__el--logout"),eX=document.querySelector(".form-user-data"),e0=document.querySelector(".form-user-password"),e1=document.getElementById("book-tour");eJ&&(t=>{var e=L.map("map",{scrollWheelZoom:!1});L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(e);let r=[];t.forEach(t=>{r.push(t.coordinates.reverse());var n=L.icon({iconUrl:"../img/pin.png",iconSize:[47,55],iconAnchor:[31,55],popupAnchor:[-3,-32]}),o=L.marker(t.coordinates,{icon:n}).addTo(e);o.bindPopup(`<b>Day ${t.day}:</b><br>${t.description}`),o.openPopup()}),e.fitBounds(r)})(JSON.parse(document.getElementById("map").dataset.locations)),eQ&&eQ.addEventListener("submit",t=>{t.preventDefault(),eH(document.getElementById("email").value,document.getElementById("password").value)}),eZ&&eZ.addEventListener("click",eK),eX&&eX.addEventListener("submit",t=>{t.preventDefault();let e=new FormData;e.append("name",document.getElementById("name").value),e.append("email",document.getElementById("email").value),e.append("photo",document.getElementById("photo").files[0]),eV(e,"data")}),e0&&e0.addEventListener("submit",async t=>{t.preventDefault(),document.querySelector(".btn--save-password").textContent="Updating...";let e=document.getElementById("password-current").value,r=document.getElementById("password").value,n=document.getElementById("password-confirm").value;await eV({passwordCurrent:e,password:r,passwordConfirm:n},"password"),document.querySelector(".btn--save-password").textContent="Save password",document.getElementById("password-current").value="",document.getElementById("password").value="",document.getElementById("password-confirm").value=""}),e1&&e1.addEventListener("click",t=>{t.target.textContent="Processing...";let{tourId:e}=t.target.dataset;eG(e)});const e4=document.querySelector("body").dataset.alert;e4&&eW("success",e4,20);
//# sourceMappingURL=index.js.map
